# `matterhorn_pytorch.util.plotter`

[回到 `matterhorn_pytorch.util`](./README.md)

[English](../../en_us/util/1_plotter.md)

[中文](../../zh_cn/util/1_plotter.md)

## Module Introduction

This module is based on `matplotlib` and is designed to plot images from event sequences or spike tensors. Events typically contain information on a time dimension and multiple spatial dimensions. For example, events generated by event cameras usually have 4 dimensions `[T, P, Y, X]`, where the time dimension `T` represents the time when the event occurs, spatial dimensions `Y` and `X` represent the pixel locations where the event occurs, and polarity `P` represents the type of event, such as the direction of a change in light intensity (from weak to strong or from strong to weak) under the condition of "light intensity change exceeding a threshold".

## `matterhorn_pytorch.util.plotter.event_plot_yx`

Print events that contain 2D spatial information `Y`, `X`, without temporal information.

```python
event_plot_yx(
    data: Union[np.ndarray, torch.Tensor],
    shape: Iterable = None,
    polarity: bool = True,
    show: bool = True,
    save: str = None,
    titles: Iterable[str] = None,
    figsize: Tuple = (8, 6),
    is_seq: bool = False
) -> None:
```

### Parameters

`data (np.ndarray | torch.Tensor)`: Data to be printed (can be a 2D, 3D, or 4D spike train, or a 2 or 3 column event sequence).

`shape (Iterable)`: If the data to be printed is an event sequence, specify its size. For example, if the shape of the event sequence is `[N, 3]`, then specify the sizes of the 3 columns respectively.

`polarity (bool)`: If a tensor is passed in, whether to treat the first dimension as the polarity dimension: if `True`, the data passed in has a shape of `[C(P), H, W]` (3D) or `[B, C(P), H, W]` (4D); if `False`, the data passed in has a shape of `[H, W]` (2D) or `[B, H, W]` (3D). If an event is passed in, whether the first column of the event sequence represents polarity.

`show (bool)`: Whether to display the image, default is to display.

`save (str)`: Whether to save the image. If a path string is passed in, the image will be saved at that path; otherwise, it will not be saved.

`titles (str*)`: Titles for each image.

`figSize (Tuple)`: Size of the image.

`is_seq (bool)`: Whether the event is a sequence. If `True`, it is an event sequence; if `False`, it is an spike train.

### Example Usage

(1) Print spike train:

```python
import torch
import matterhorn_pytorch as mth


events = (torch.rand(2, 128, 128) > 0.9).float()
print(events.shape)
mth.util.plotter.event_plot_yx(events)
```

![Result Example](../../../assets/docs/util/plotter_1.png)

(2) Print event sequence:

```python
import torch
import matterhorn_pytorch as mth


events = torch.zeros(1000, 3, dtype = torch.long) # [P, H, W]
events[:, 0] = (torch.rand(1000) > 0.5).long() # P
events[:, 1] = torch.randint(80, (1000,)) # Y
events[:, 2] = torch.randint(128, (1000,)) # X
print(events.shape)
mth.util.plotter.event_plot_yx(events, (2, 80, 128), is_seq = True)
```

![Result Example](../../../assets/docs/util/plotter_2.png)

## `matterhorn_pytorch.util.plotter.event_plot_tx`

Print events that contain 1D spatial information `X` and 1D temporal information `T`.

```python
event_plot_tx(
    data: Union[np.ndarray, torch.Tensor],
    shape: Iterable = None,
    polarity: bool = True,
    show: bool = True,
    save: str = None,
    titles: Iterable[str] = None,
    figsize: Tuple = (8, 6),
    is_seq: bool = False
) -> None:
```

### Parameters

`data (np.ndarray | torch.Tensor)`: Data to be printed (can be a 2D, 3D, or 4D spike train, or a 2 or 3 column event sequence).

`shape (Iterable)`: If the data to be printed is an event sequence, specify its size. For example, if the shape of the event sequence is `[N, 3]`, then specify the sizes of the 3 columns respectively.

`polarity (bool)`: If a tensor is passed in, whether to treat the second dimension as the polarity dimension: if `True`, the data passed in has a shape of `[T, C(P), L]` (3D) or `[T, B, C(P), L]` (4D); if `False`, the data passed in has a shape of `[T, L]` (2D) or `[T, B, L]` (3D). If an event is passed in, whether the second column of the event sequence represents polarity.

`show (bool)`: Whether to display the image, default is to display.

`save (str)`: Whether to save the image. If a path string is passed in, the image will be saved at that path; otherwise, it will not be saved.

`titles (str*)`: Titles for each image.

`figSize (Tuple)`: Size of the image.

`is_seq (bool)`: Whether the event is a sequence. If `True`, it is an event sequence; if `False`, it is an spike train.

### Example Usage

(1) Print spike train:

```python
import torch
import matterhorn_pytorch as mth


events = (torch.rand(64, 2, 128) > 0.9).float()
print(events.shape)
mth.util.plotter.event_plot_tx(events)
```

![Result Example](../../../assets/docs/util/plotter_3.png)

(2) Print event sequence:

```python
import torch
import matterhorn_pytorch as mth


events = torch.zeros(1000, 3, dtype = torch.long) # [T, P, L]
events[:, 0] = torch.randint(1600, (1000,)) # T
events[:, 1] = (torch.rand(1000) > 0.5).long() # P
events[:, 2] = torch.randint(128, (1000,)) # X
print(events.shape)
mth.util.plotter.event_plot_tx(events, (0, 2, 128), is_seq = True)
```

![Result Example](../../../assets/docs/util/plotter_4.png)

## `matterhorn_pytorch.util.plotter.event_plot_tyx`

Print events that contain 2D spatial information `Y`, `X`, and 1D temporal information `T`.

```python
event_plot_tyx(
    data: Union[np.ndarray, torch.Tensor],
    shape: Iterable = None,
    polarity: bool = True,
    show: bool = True,
    save: str = None,
    titles: Iterable[str] = None,
    figsize: Tuple = (8, 6),
    is_seq: bool = False
) -> None:
```

### Parameters

`data (np.ndarray | torch.Tensor)`: Data to be printed (can be a 3D, 4D, or 5D spike train, or a 3 or 4 column event sequence).

`shape (Iterable)`: If the data to be printed is an event sequence, specify its size. For example, if the shape of the event sequence is `[N, 4]`, then specify the sizes of the 4 columns respectively.

`polarity (bool)`: If a tensor is passed in, whether to treat the second dimension as the polarity dimension: if `True`, the data passed in has a shape of `[T, C(P), H, W]` (4D) or `[B, T, C(P), H, W]` (5D); if `False`, the data passed in has a shape of `[T, H, W]` (3D) or `[B, T, H, W]` (4D). If an event is passed in, whether the second column of the event sequence represents polarity.

`show (bool)`: Whether to display the image, default is to display.

`save (str)`: Whether to save the image. If a path string is passed in, the image will be saved at that path;

`titles (str*)`: Titles for each image.

`figSize (Tuple)`: Size of the image.

`is_seq (bool)`: Whether the event is a sequence. If `True`, it is an event sequence; if `False`, it is an spike train.

### Example Usage

(1) Print spike train:

```python
import torch
import matterhorn_pytorch as mth


events = (torch.rand(1000, 2, 128, 128) > 0.9998).float()
print(events.shape)
mth.util.plotter.event_plot_tyx(events)
```

![Result Example](../../../assets/docs/util/plotter_5.png)

(2) Print event sequence:

```python
import torch
import matterhorn_pytorch as mth


events = torch.zeros(4000, 4, dtype = torch.long) # [T, P, H, W]
events[:, 0] = torch.randint(1600, (4000,)) # T
events[:, 1] = (torch.rand(4000) > 0.5).long() # P
events[:, 2] = torch.randint(80, (4000,)) # Y
events[:, 3] = torch.randint(128, (4000,)) # X
print(events.shape)
mth.util.plotter.event_plot_tyx(events, (0, 2, 80, 128), is_seq = True)
```

![Result Example](../../../assets/docs/util/plotter_6.png)